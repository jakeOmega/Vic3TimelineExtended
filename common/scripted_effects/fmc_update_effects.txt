


country_update_sectors = {
	every_state = {
		if = {
			limit = {
				any_scope_building = {
					is_under_construction = yes
				}
			}
			set_specified_building_level = {
				SPEC_LEVEL = 1
				SPEC_TYPE = building_construction_sector
			}
		}
		fmc_state_on_construction_end = yes
	}
	if = {
		limit = {
			fmc_amount_of_sectors = 0
		}
		capital = {
			create_building = {
				building = building_construction_sector
				level = 1
			}
		}
	}
}



country_update_construction_data = {
	country_update_private_public = yes
	update_construction_effect = yes
}


country_update_private_public = {
	remove_modifier = private_public_share_modifier
	add_modifier = {
		name = private_public_share_modifier
		multiplier = private_public_construction_ratio_target
	}
}


update_construction_effect = {
	set_local_variable = {
		name = fmc_construction_per_sector_var
		value = fmc_construction_per_sector
	}
	change_local_variable = {
		name = fmc_construction_per_sector_var
		subtract = 1
	}
	
	every_scope_building = {
		limit = {
			type = bt:building_construction_sector
		}
		remove_modifier = add_construction_modifier
		# save_scope_as = fmc_current_building
		add_modifier = {
			name = add_construction_modifier
			multiplier = local_var:fmc_construction_per_sector_var
		}
	}

	if = {
		limit = {
			NOT = { has_variable = investment_pool_initialized}
		}
		add_investment_pool = starting_investment_pool
		set_variable = investment_pool_initialized
	}
}


reset_building = {
	state = {
		remove_building = building_construction_sector
		create_building = {
			building = building_construction_sector
			level = 1
		}
	}
}