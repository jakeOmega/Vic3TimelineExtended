# Nuclear weapons
increase_funding_nuclear_program = {
	name = "INCREASE_NUCLEAR_WEAPON_PROGRAM_FUNDING"
	desc = "INCREASE_NUCLEAR_WEAPON_PROGRAM_FUNDING_DESC"

	visible = { always = yes }
	
	#Country scope
	ai_chance = {
		value = 0
        if = { 
            limit = { country_innovation > nuclear_weapon_program_funding_step }
            add = 50
        }
        if = { 
            limit = { var:nuclear_weapons_program_first_nuke_done = 0 }
            add = 25
        }

        if = { 
            limit = { var:nuclear_weapon_stockpile > 10 }
            add = -50
        }
    }

	possible = {
		country_innovation > nuclear_weapon_program_funding_step
        NOT = {
            any_scope_treaty = {
                any_scope_article = {
                    has_type = nuclear_disarmament
                    source_country = root
                }
            }
        }
	}

	effect = {
        custom_tooltip = {
            text = "INCREASE_NUCLEAR_WEAPON_PROGRAM_FUNDING_DESC"
            change_variable = {
                name = nuclear_weapons_program_funding
                add = 1
            }
            if = {
                limit = { has_modifier = nuclear_weapon_program_funding }
                remove_modifier = nuclear_weapon_program_funding
            }
            add_modifier = {
                name = nuclear_weapon_program_funding
                multiplier = nuclear_weapons_program_current_cost
            }
        }
	}
}

decrease_funding_nuclear_program = {
	name = "DECREASE_NUCLEAR_WEAPON_PROGRAM_FUNDING"
	desc = "DECREASE_NUCLEAR_WEAPON_PROGRAM_FUNDING_DESC"

	visible = { always = yes }
	
	#Country scope
	ai_chance = {
		value = 0
        if = { 
            limit = { country_innovation < modifier:country_weekly_innovation_max_add }
            add = 25
        }

        if = { 
            limit = { NOT = { var:nuclear_weapons_program_first_nuke_done = 0 }}
            add = 25
        }

        if = { 
            limit = { var:nuclear_weapon_stockpile > 10 }
            add = 50
        }
    }

	possible = {
		var:nuclear_weapons_program_funding > 0
	}

	effect = {
        custom_tooltip = {
            text = "DECREASE_NUCLEAR_WEAPON_PROGRAM_FUNDING_DESC"
            change_variable = {
                name = nuclear_weapons_program_funding
                subtract = 1
            }
            if = {
                limit = { has_modifier = nuclear_weapon_program_funding }
                remove_modifier = nuclear_weapon_program_funding
            }
            add_modifier = {
                name = nuclear_weapon_program_funding
                multiplier = nuclear_weapons_program_current_cost
            }
        }
	}
}

cb_policy_rate_hike = {
    name = "CB_POLICY_RATE_HIKE"
    desc = "CB_POLICY_RATE_HIKE_DESC"
    visible = {
        always = yes
    }
    ai_chance = {
        value = 0
        # Core: use when hot / bubble risk high
        if = { limit = { banking_cycle_is_frenzy = yes } add = 45 }
        if = { limit = { banking_cycle_bubble_risk_high = yes } add = 25 }
        if = { limit = { banking_cycle_bubble_risk_rising = yes } add = 15 }

        # Law flavor: prefer if proper CB
        if = { limit = { has_law = law_central_bank_independence } add = 15 }

        # Resources
        if = { limit = { banking_points_high = yes } add = 10 }
        if = { limit = { banking_points_low = yes } add = -15 }

        # Avoid when weak
        if = { limit = { banking_cycle_is_recession = yes } add = -80 }
        if = { limit = { banking_tool_omo_active = yes } add = -10 }  # don't fight OMO
        if = { limit = { banking_tool_eliq_active = yes } add = -40 } # don't hike during emergency
    }


    possible = {
        modifier:country_banking_intervention_max_add >= 2
        NOT = { has_modifier = banking_policy_rate_hike }
    }

    effect = {
        # Spend 2 points (via the modifier) and cool the cycle
        add_modifier = { name = banking_policy_rate_hike days = 365 }
        add_radicals = {
            value = small_radicals
        }
    }
}

cb_open_market_ops = {
    name = "CB_OPEN_MARKET_OPS"
    desc = "CB_OPEN_MARKET_OPS_DESC"
    visible = { always = yes }
    
    ai_chance = {
        value = 0
        # Core: use in panic/downturn, or when momentum is sharply negative
        if = { limit = { banking_cycle_is_panic = yes } add = 60 }
        if = { limit = { banking_cycle_is_downturn = yes } add = 35 }
        if = { limit = { banking_cycle_risk_falling = yes } add = 15 }

        # Law flavor
        if = { limit = { has_law = law_central_bank_independence } add = 15 }

        # Resources
        if = { limit = { banking_points_med = yes } add = 10 }
        if = { limit = { banking_points_low = yes } add = 5 }

        # Avoid when hot or contradictory
        if = { limit = { banking_cycle_is_frenzy = yes } add = -40 }
        if = { limit = { banking_cycle_bubble_risk_high = yes } add = -20 }
        if = { limit = { banking_tool_rate_hike_active = yes } add = -30 }

        # (Optional) Fiscal stress: conservative on big asset buys if highly stressed
        if = { limit = { banking_fiscal_stress_high = yes } add = -15 }
    }


    possible = {
        has_technology_researched = keynesian_economics
        modifier:country_banking_intervention_max_add >= 4
        NOT = { has_modifier = banking_open_market_ops }
    }
    effect = {
        add_modifier = { name = banking_open_market_ops days = 365 }
    }
}

cb_countercyclical_buffer = {
    name = "CB_COUNTERCYCLICAL_BUFFER"
    desc = "CB_COUNTERCYCLICAL_BUFFER_DESC"
    visible = { always = yes }
    
    ai_chance = {
        value = 0
        # Core: expansion/frenzy, especially with building heat
        if = { limit = { banking_cycle_is_expansion = yes } add = 25 }
        if = { limit = { banking_cycle_is_frenzy = yes } add = 35 }
        if = { limit = { banking_cycle_bubble_risk_rising = yes } add = 15 }

        # Law flavor: prudential regimes lean this way
        if = { limit = { has_law = law_prudential_narrow_banking } add = 15 }
        if = { limit = { has_law = law_universal_banking_light_prudence } add = 10 }
        if = { limit = { has_law = law_free_mutual_banking } add = 5 }

        # Resources
        if = { limit = { banking_points_low = yes } add = 10 }  # cheap, so attractive when points are scarce

        # Avoid in recession/panic
        if = { limit = { banking_cycle_is_recession = yes } add = -60 }
    }

    possible = {
        has_technology_researched = international_exchange_standards
        modifier:country_banking_intervention_max_add >= 2
        NOT = { has_modifier = banking_countercyclical_capital_buffer }
    }
    effect = {
        add_modifier = { name = banking_countercyclical_capital_buffer days = 185 }
    }
}

cb_expand_deposit_guarantee = {
    name = "CB_EXPAND_DEPOSIT_GUARANTEE"
    desc = "CB_EXPAND_DEPOSIT_GUARANTEE_DESC"
    visible = { always = yes }
    
    ai_chance = {
        value = 0
        # Core: strong in panic, useful in downturn
        if = { limit = { banking_cycle_is_panic = yes } add = 70 }
        if = { limit = { banking_cycle_is_downturn = yes } add = 25 }

        # Synergy: if emergency liquidity not active, prefer deposit guarantee
        if = { limit = { NOT = { banking_tool_eliq_active = yes } } add = 10 }

        # Law flavor
        if = { limit = { has_law = law_prudential_narrow_banking } add = 15 }
        if = { limit = { has_law = law_central_bank_independence } add = 10 }

        # Avoid if already expanded or if in hot market
        if = { limit = { banking_tool_deposit_active = yes } add = -100 }
        if = { limit = { banking_cycle_is_frenzy = yes } add = -30 }

        # Resources
        if = { limit = { banking_points_low = yes } add = -10 }
    }

    possible = {
        has_technology_researched = consumer_credit
        modifier:country_banking_intervention_max_add >= 4
        NOT = { has_modifier = banking_expand_deposit_guarantee }
    }
    effect = {
        add_modifier = { name = banking_expand_deposit_guarantee days = 365 }
        add_loyalists = {
            value = small_radicals
        }
    }
}

cb_directed_credit_infrastructure = {
    name = "CB_DIRECTED_CREDIT_INFRA"
    desc = "CB_DIRECTED_CREDIT_INFRA_DESC"
    visible = { always = yes }
    
    ai_chance = {
        value = 0
        # Core: best in downturn; OK in stable if momentum is falling
        if = { limit = { banking_cycle_is_downturn = yes } add = 40 }
        if = { limit = { banking_cycle_is_stable = yes banking_cycle_risk_falling = yes } add = 15 }

        # Law flavor
        if = { limit = { has_law = law_directed_credit_development_banks } add = 25 }

        # Avoid in frenzy (overheats) and deep panic (prefer E-LIQ first)
        if = { limit = { banking_cycle_is_frenzy = yes } add = -35 }
        if = { limit = { banking_cycle_is_panic = yes } add = -30 }
        if = { limit = { banking_tool_eliq_active = yes } add = 10 } # after the firebreak, push demand

        # Resources
        if = { limit = { banking_points_med = yes } add = 10 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 3
        NOT = { has_modifier = banking_directed_credit_infrastructure }
    }
    effect = {
        add_modifier = { name = banking_directed_credit_infrastructure days = 730 }
    }
}

cb_emergency_liquidity_program = {
    name = "CB_EMERGENCY_LIQUIDITY"
    desc = "CB_EMERGENCY_LIQUIDITY_DESC"
    visible = { always = yes }
    
    ai_chance = {
        value = 0
        # Core: panic now; also when sliding fast toward panic
        if = { limit = { banking_cycle_is_panic = yes } add = 85 }
        if = { limit = { banking_cycle_is_downturn = yes var:finance_cycle_momentum <= -4 } add = 35 }

        # Law flavor
        if = { limit = { has_law = law_central_bank_independence } add = 10 }
        if = { limit = { has_law = law_directed_credit_development_banks } add = 10 }

        # Avoid otherwise
        if = { limit = { banking_cycle_is_expansion = yes } add = -60 }
        if = { limit = { banking_cycle_is_frenzy = yes } add = -70 }

        # Resources (if you barely have enough, still try)
        if = { limit = { banking_points_low = yes } add = 10 }

        # Donâ€™t stack duplicates
        if = { limit = { banking_tool_eliq_active = yes } add = -100 }
    }

    possible = {
        has_technology_researched = investment_banks
        modifier:country_banking_intervention_max_add >= 6
        NOT = { has_modifier = banking_emergency_liquidity_program }
    }
    effect = {
        add_modifier = { name = banking_emergency_liquidity_program days = 365 }
        # Big shock absorber
        change_variable = { name = finance_cycle_value add = 20 }        # jump out of panic quickly
        change_variable = { name = bubble_pressure add = 20 }
    }
}

cb_moral_suasion = {
    name = "CB_MORAL_SUASION"
    desc = "CB_MORAL_SUASION_DESC"
    visible = { always = yes }
    
    ai_chance = {
        value = 0
        # Use in light heat or light weakness when other tools are gated/expensive
        if = { limit = { banking_cycle_is_expansion = yes } add = 15 }
        if = { limit = { banking_cycle_bubble_risk_rising = yes } add = 30 }

        # Prefer when points are scarce
        if = { limit = { banking_points_low = yes } add = 20 }

        # Deprioritize in extremes (panic/frenzy demand stronger tools)
        if = { limit = { banking_cycle_is_panic = yes } add = -30 }
        if = { limit = { banking_cycle_is_frenzy = yes } add = -25 }
        if = { limit = { banking_cycle_is_downturn = yes } add = -20 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 1
        NOT = { has_modifier = banking_moral_suasion }
    }
    effect = {
        add_modifier = { name = banking_moral_suasion days = 365 }

    }
}

cb_raise_margin_requirements = {
    name = "CB_RAISE_MARGIN_REQ"
    desc = "CB_RAISE_MARGIN_REQ_DESC"
    visible = { always = yes }
    
    ai_chance = {
        value = 0
        # Core: expansion/frenzy, especially with building heat
        if = { limit = { banking_cycle_is_expansion = yes } add = 5 }
        if = { limit = { banking_cycle_is_frenzy = yes } add = 15 }
        if = { limit = { banking_cycle_bubble_risk_rising = yes } add = 35 }

        # Law flavor: prudential regimes lean this way
        if = { limit = { has_law = law_prudential_narrow_banking } add = 15 }
        if = { limit = { has_law = law_universal_banking_light_prudence } add = 10 }
        if = { limit = { has_law = law_free_mutual_banking } add = 5 }

        # Resources
        if = { limit = { banking_points_low = yes } add = 10 }  # cheap, so attractive when points are scarce

        # Avoid in recession/panic
        if = { limit = { banking_cycle_is_recession = yes } add = -60 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 2
        NOT = { has_modifier = banking_raise_margin_requirements }
    }
    effect = {
        add_modifier = { name = banking_raise_margin_requirements days = 185 }
    }
}

cb_fx_devaluation = {
    name = "CB_FX_DEVALUATION"
    desc = "CB_FX_DEVALUATION_DESC"
    visible = { always = yes }

    ai_chance = {
        value = 0
        # Core: use in panic/downturn, or when momentum is sharply negative
        if = { limit = { banking_cycle_is_panic = yes } add = 60 }
        if = { limit = { banking_cycle_is_downturn = yes } add = 35 }
        if = { limit = { banking_cycle_risk_falling = yes } add = 15 }

        # Law flavor
        if = { limit = { has_law = law_central_bank_independence } add = 15 }

        # Resources
        if = { limit = { banking_points_med = yes } add = 10 }
        if = { limit = { banking_points_low = yes } add = 5 }

        # Avoid when hot or contradictory
        if = { limit = { banking_cycle_is_frenzy = yes } add = -40 }
        if = { limit = { banking_cycle_bubble_risk_high = yes } add = -20 }
        if = { limit = { banking_tool_rate_hike_active = yes } add = -30 }

        # (Optional) Fiscal stress: conservative on big asset buys if highly stressed
        if = { limit = { banking_fiscal_stress_high = yes } add = -15 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 3
        NOT = { has_modifier = banking_fx_devaluation }
        has_technology_researched = keynesian_economics
    }
    effect = {
        add_modifier = { name = banking_fx_devaluation days = 365 }
    }
}

cb_fx_support = {
    name = "CB_FX_SUPPORT"
    desc = "CB_FX_SUPPORT_DESC"
    visible = { always = yes }

    ai_chance = {
        value = 0
        # Core: use in panic/downturn, or when momentum is sharply negative
        if = { limit = { banking_cycle_is_panic = yes } add = 60 }
        if = { limit = { banking_cycle_is_downturn = yes } add = 35 }
        if = { limit = { banking_cycle_risk_falling = yes } add = 15 }

        # Law flavor
        if = { limit = { has_law = law_central_bank_independence } add = 15 }

        # Resources
        if = { limit = { banking_points_med = yes } add = 10 }
        if = { limit = { banking_points_low = yes } add = 5 }

        # Avoid when hot or contradictory
        if = { limit = { banking_cycle_is_frenzy = yes } add = -40 }
        if = { limit = { banking_cycle_bubble_risk_high = yes } add = -20 }
        if = { limit = { banking_tool_rate_hike_active = yes } add = -30 }

        # (Optional) Fiscal stress: conservative on big asset buys if highly stressed
        if = { limit = { banking_fiscal_stress_high = yes } add = -15 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 3
        NOT = { has_modifier = banking_fx_support }
        has_technology_researched = international_exchange_standards
    }
    effect = {
        add_modifier = { name = banking_fx_support days = 365 }
    }
}

cb_capital_controls_outflow = {
    name = "CB_CAPITAL_CONTROLS_OUT"
    desc = "CB_CAPITAL_CONTROLS_OUT_DESC"
    visible = { always = yes }

    ai_chance = {
        value = 0
        # Core: use in panic/downturn, or when momentum is sharply negative
        if = { limit = { banking_cycle_is_panic = yes } add = 60 }
        if = { limit = { banking_cycle_is_downturn = yes } add = 35 }
        if = { limit = { banking_cycle_risk_falling = yes } add = 15 }

        # Law flavor
        if = { limit = { has_law = law_type:law_prudential_narrow_banking } add = 15 }
        if = { limit = { has_law = law_type:law_directed_credit_development_banks } add = 10 }

        # Resources
        if = { limit = { banking_points_med = yes } add = 10 }
        if = { limit = { banking_points_low = yes } add = 5 }

        # Avoid when hot or contradictory
        if = { limit = { banking_cycle_is_frenzy = yes } add = -40 }
        if = { limit = { banking_cycle_bubble_risk_high = yes } add = -20 }
        if = { limit = { banking_tool_rate_hike_active = yes } add = -30 }

        # (Optional) Fiscal stress: conservative on big asset buys if highly stressed
        if = { limit = { banking_fiscal_stress_high = yes } add = -15 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 2
        NOT = { has_modifier = banking_capital_controls_out }
        OR = {
            has_law = law_type:law_prudential_narrow_banking
            has_law = law_type:law_directed_credit_development_banks
        }
    }
    effect = {
        add_modifier = { name = banking_capital_controls_out days = 365 }
    }
}

cb_fx_swap_lines = {
    name = "CB_FX_SWAP_LINES"
    desc = "CB_FX_SWAP_LINES_DESC"
    visible = { always = yes }

    ai_chance = {
        value = 0
        # Core: use in panic/downturn, or when momentum is sharply negative
        if = { limit = { banking_cycle_is_panic = yes } add = 60 }
        if = { limit = { banking_cycle_is_downturn = yes } add = 35 }
        if = { limit = { banking_cycle_risk_falling = yes } add = 15 }

        # Law flavor
        if = { limit = { has_law = law_type:law_central_bank_independence } add = 15 }
        if = { limit = { has_law = law_type:law_directed_credit_development_banks } add = 10 }

        # Resources
        if = { limit = { banking_points_med = yes } add = 10 }
        if = { limit = { banking_points_low = yes } add = 5 }

        # Avoid when hot or contradictory
        if = { limit = { banking_cycle_is_frenzy = yes } add = -40 }
        if = { limit = { banking_cycle_bubble_risk_high = yes } add = -20 }
        if = { limit = { banking_tool_rate_hike_active = yes } add = -30 }

        # (Optional) Fiscal stress: conservative on big asset buys if highly stressed
        if = { limit = { banking_fiscal_stress_high = yes } add = -15 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 4
        NOT = { has_modifier = banking_fx_swap_lines }
        has_technology_researched = international_exchange_standards
        OR = {
            has_law = law_type:law_central_bank_independence
            has_law = law_type:law_directed_credit_development_banks
        }
    }
    effect = {
        add_modifier = { name = banking_fx_swap_lines days = 365 }
        change_variable = { name = finance_cycle_value add = 5 }
  }
}


cb_export_credit_facility = {
    name = "CB_EXPORT_CREDIT"
    desc = "CB_EXPORT_CREDIT_DESC"
    visible = { always = yes }

    ai_chance = {
        value = 0
        # Core: use in panic/downturn, or when momentum is sharply negative
        if = { limit = { banking_cycle_is_panic = yes } add = 60 }
        if = { limit = { banking_cycle_is_downturn = yes } add = 35 }
        if = { limit = { banking_cycle_risk_falling = yes } add = 15 }

        # Law flavor
        if = { limit = { has_law = law_directed_credit_development_banks } add = 15 }

        # Resources
        if = { limit = { banking_points_med = yes } add = 10 }
        if = { limit = { banking_points_low = yes } add = 5 }

        # Avoid when hot or contradictory
        if = { limit = { banking_cycle_is_frenzy = yes } add = -40 }
        if = { limit = { banking_cycle_bubble_risk_high = yes } add = -20 }
        if = { limit = { banking_tool_rate_hike_active = yes } add = -30 }

        # (Optional) Fiscal stress: conservative on big asset buys if highly stressed
        if = { limit = { banking_fiscal_stress_high = yes } add = -15 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 2
        NOT = { has_modifier = banking_export_credit_facility }
        has_technology_researched = corporate_management
    }
    effect = {
        add_modifier = { name = banking_export_credit_facility days = 730 } # 24m commitment
    }
}

cb_asset_relief_program = {
    name = "CB_ASSET_RELIEF"
    desc = "CB_ASSET_RELIEF_DESC"
    visible = { always = yes }

    ai_chance = {
        value = 0
        # Use in real stress; also in stagnation
        if = { limit = { banking_cycle_is_panic = yes } add = 70 }
        if = { limit = { banking_cycle_is_downturn = yes } add = 40 }
        if = { limit = { var:finance_cycle_value >= 25 var:finance_cycle_value < 40 } add = 25 } # stagnation shelf
        # Prefer when fiscal/financial stress is high (replace with your own signals if you have them)
        if = { limit = { banking_fiscal_stress_low = yes } add = 10 }
        if = { limit = { banking_fiscal_stress_high = yes } add = 10 }
        # Avoid when hot
        if = { limit = { banking_cycle_is_boom = yes } add = -30 }
        if = { limit = { banking_cycle_is_frenzy = yes } add = -50 }
        # Points awareness
        if = { limit = { banking_points_high = yes } add = 10 }
    }

    possible = {
        modifier:country_banking_intervention_max_add >= 5
        NOT = { has_modifier = banking_asset_relief_program }
        OR = {
            has_technology_researched = keynesian_economics
        }
        OR = {
            has_law = law_type:law_central_bank_independence
            has_law = law_type:law_directed_credit_development_banks
            has_law = law_type:law_prudential_narrow_banking
        }
    }

    effect = {
        add_modifier = { name = banking_asset_relief_program days = 1080 } # 36 months
    }
}


# Custom religion

select_ideology_traditionalist_economy = {
    name = "SELECT_IDEOLOGY_TRADITIONALIST_ECONOMY"
    desc = "SELECT_IDEOLOGY_TRADITIONALIST_ECONOMY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_traditionalist_economy_selected }
        var:current_stage = 1
    }
    
    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_free_market_economy_selected }
        NOT = { has_variable = custom_religion_ideology_socialist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_social_democratic_economy_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_economy_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_economy_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_TRADITIONALIST_ECONOMY_DESC"
            set_variable = {
                name = custom_religion_ideology_traditionalist_economy_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_traditionalist_economy = {
    name = "DESELECT_IDEOLOGY_TRADITIONALIST_ECONOMY"
    desc = "DESELECT_IDEOLOGY_TRADITIONALIST_ECONOMY_DESC"

    visible = {
        has_variable = custom_religion_ideology_traditionalist_economy_selected
        var:current_stage = 1
    }
    
    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_TRADITIONALIST_ECONOMY_DESC"
            remove_variable = custom_religion_ideology_traditionalist_economy_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_free_market_economy = {
    name = "SELECT_IDEOLOGY_FREE_MARKET_ECONOMY"
    desc = "SELECT_IDEOLOGY_FREE_MARKET_ECONOMY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_free_market_economy_selected }
        var:current_stage = 1
    }
    
    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_traditionalist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_socialist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_social_democratic_economy_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_economy_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_economy_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_FREE_MARKET_ECONOMY_DESC"
            set_variable = {
                name = custom_religion_ideology_free_market_economy_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_free_market_economy = {
    name = "DESELECT_IDEOLOGY_FREE_MARKET_ECONOMY"
    desc = "DESELECT_IDEOLOGY_FREE_MARKET_ECONOMY_DESC"

    visible = {
        has_variable = custom_religion_ideology_free_market_economy_selected
        var:current_stage = 1
    }
    
    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
        NOT = { has_variable = custom_religion_ideology_traditionalist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_socialist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_social_democratic_economy_selected }
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_FREE_MARKET_ECONOMY_DESC"
            remove_variable = custom_religion_ideology_free_market_economy_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_socialist_economy = {
    name = "SELECT_IDEOLOGY_SOCIALIST_ECONOMY"
    desc = "SELECT_IDEOLOGY_SOCIALIST_ECONOMY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_socialist_economy_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_traditionalist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_free_market_economy_selected }
        NOT = { has_variable = custom_religion_ideology_social_democratic_economy_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_economy_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_economy_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_SOCIALIST_ECONOMY_DESC"
            set_variable = {
                name = custom_religion_ideology_socialist_economy_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_socialist_economy = {
    name = "DESELECT_IDEOLOGY_SOCIALIST_ECONOMY"
    desc = "DESELECT_IDEOLOGY_SOCIALIST_ECONOMY_DESC"

    visible = {
        has_variable = custom_religion_ideology_socialist_economy_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_SOCIALIST_ECONOMY_DESC"
            remove_variable = custom_religion_ideology_socialist_economy_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_social_democratic_economy = {
    name = "SELECT_IDEOLOGY_SOCIAL_DEMOCRATIC_ECONOMY"
    desc = "SELECT_IDEOLOGY_SOCIAL_DEMOCRATIC_ECONOMY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_social_democratic_economy_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_traditionalist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_free_market_economy_selected }
        NOT = { has_variable = custom_religion_ideology_socialist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_economy_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_economy_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_SOCIAL_DEMOCRATIC_ECONOMY_DESC"
            set_variable = {
                name = custom_religion_ideology_social_democratic_economy_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_social_democratic_economy = {
    name = "DESELECT_IDEOLOGY_SOCIAL_DEMOCRATIC_ECONOMY"
    desc = "DESELECT_IDEOLOGY_SOCIAL_DEMOCRATIC_ECONOMY_DESC"

    visible = {
        has_variable = custom_religion_ideology_social_democratic_economy_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_SOCIAL_DEMOCRATIC_ECONOMY_DESC"
            remove_variable = custom_religion_ideology_social_democratic_economy_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_imperial_cult_economy = {
    name = "SELECT_IDEOLOGY_IMPERIAL_CULT_ECONOMY"
    desc = "SELECT_IDEOLOGY_IMPERIAL_CULT_ECONOMY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_imperial_cult_economy_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = ideology_custom_religion_socialist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_social_democratic_economy_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_economy_selected }
        NOT = { has_variable = custom_religion_ideology_traditionalist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_free_market_economy_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_IMPERIAL_CULT_ECONOMY_DESC"
            set_variable = {
                name = custom_religion_ideology_imperial_cult_economy_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_imperial_cult_economy = {
    name = "DESELECT_IDEOLOGY_IMPERIAL_CULT_ECONOMY"
    desc = "DESELECT_IDEOLOGY_IMPERIAL_CULT_ECONOMY_DESC"

    visible = {
        has_variable = custom_religion_ideology_imperial_cult_economy_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_IMPERIAL_CULT_ECONOMY_DESC"
            remove_variable = custom_religion_ideology_imperial_cult_economy_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_theocratic_economy = {
    name = "SELECT_IDEOLOGY_THEOCRATIC_ECONOMY"
    desc = "SELECT_IDEOLOGY_THEOCRATIC_ECONOMY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_theocratic_economy_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_social_democratic_economy_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_economy_selected }
        NOT = { has_variable = custom_religion_ideology_traditionalist_economy_selected }
        NOT = { has_variable = custom_religion_ideology_free_market_economy_selected }
        NOT = { has_variable = custom_religion_ideology_socialist_economy_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_THEOCRATIC_ECONOMY_DESC"
            set_variable = {
                name = custom_religion_ideology_theocratic_economy_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_theocratic_economy = {
    name = "DESELECT_IDEOLOGY_THEOCRATIC_ECONOMY"
    desc = "DESELECT_IDEOLOGY_THEOCRATIC_ECONOMY_DESC"

    visible = {
        has_variable = custom_religion_ideology_theocratic_economy_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_THEOCRATIC_ECONOMY_DESC"
            remove_variable = custom_religion_ideology_theocratic_economy_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_traditionalist_society = {
    name = "SELECT_IDEOLOGY_TRADITIONALIST_SOCIETY"
    desc = "SELECT_IDEOLOGY_TRADITIONALIST_SOCIETY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_traditionalist_society_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_inclusive_society_selected }
        NOT = { has_variable = custom_religion_ideology_totalitarian_society_selected }
        NOT = { has_variable = custom_religion_ideology_meritocratic_society_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_society_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_society_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_TRADITIONALIST_SOCIETY_DESC"
            set_variable = {
                name = custom_religion_ideology_traditionalist_society_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_traditionalist_society = {
    name = "DESELECT_IDEOLOGY_TRADITIONALIST_SOCIETY"
    desc = "DESELECT_IDEOLOGY_TRADITIONALIST_SOCIETY_DESC"

    visible = {
        has_variable = custom_religion_ideology_traditionalist_society_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_TRADITIONALIST_SOCIETY_DESC"
            remove_variable = custom_religion_ideology_traditionalist_society_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_inclusive_society = {
    name = "SELECT_IDEOLOGY_INCLUSIVE_SOCIETY"
    desc = "SELECT_IDEOLOGY_INCLUSIVE_SOCIETY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_inclusive_society_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_traditionalist_society_selected }
        NOT = { has_variable = custom_religion_ideology_totalitarian_society_selected }
        NOT = { has_variable = custom_religion_ideology_meritocratic_society_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_society_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_society_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_INCLUSIVE_SOCIETY_DESC"
            set_variable = {
                name = custom_religion_ideology_inclusive_society_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_inclusive_society = {
    name = "DESELECT_IDEOLOGY_INCLUSIVE_SOCIETY"
    desc = "DESELECT_IDEOLOGY_INCLUSIVE_SOCIETY_DESC"

    visible = {
        has_variable = custom_religion_ideology_inclusive_society_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_INCLUSIVE_SOCIETY_DESC"
            remove_variable = custom_religion_ideology_inclusive_society_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_totalitarian_society = {
    name = "SELECT_IDEOLOGY_TOTALITARIAN_SOCIETY"
    desc = "SELECT_IDEOLOGY_TOTALITARIAN_SOCIETY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_totalitarian_society_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_traditionalist_society_selected }
        NOT = { has_variable = custom_religion_ideology_inclusive_society_selected }
        NOT = { has_variable = custom_religion_ideology_meritocratic_society_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_society_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_society_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_TOTALITARIAN_SOCIETY_DESC"
            set_variable = {
                name = custom_religion_ideology_totalitarian_society_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_totalitarian_society = {
    name = "DESELECT_IDEOLOGY_TOTALITARIAN_SOCIETY"
    desc = "DESELECT_IDEOLOGY_TOTALITARIAN_SOCIETY_DESC"

    visible = {
        has_variable = custom_religion_ideology_totalitarian_society_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_TOTALITARIAN_SOCIETY_DESC"
            remove_variable = custom_religion_ideology_totalitarian_society_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_meritocratic_society = {
    name = "SELECT_IDEOLOGY_MERITOCRATIC_SOCIETY"
    desc = "SELECT_IDEOLOGY_MERITOCRATIC_SOCIETY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_meritocratic_society_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_traditionalist_society_selected }
        NOT = { has_variable = custom_religion_ideology_inclusive_society_selected }
        NOT = { has_variable = custom_religion_ideology_totalitarian_society_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_society_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_society_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_MERITOCRATIC_SOCIETY_DESC"
            set_variable = {
                name = custom_religion_ideology_meritocratic_society_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_meritocratic_society = {
    name = "DESELECT_IDEOLOGY_MERITOCRATIC_SOCIETY"
    desc = "DESELECT_IDEOLOGY_MERITOCRATIC_SOCIETY_DESC"

    visible = {
        has_variable = custom_religion_ideology_meritocratic_society_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_MERITOCRATIC_SOCIETY_DESC"
            remove_variable = custom_religion_ideology_meritocratic_society_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_imperial_cult_society = {
    name = "SELECT_IDEOLOGY_IMPERIAL_CULT_SOCIETY"
    desc = "SELECT_IDEOLOGY_IMPERIAL_CULT_SOCIETY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_imperial_cult_society_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_traditionalist_society_selected }
        NOT = { has_variable = custom_religion_ideology_inclusive_society_selected }
        NOT = { has_variable = custom_religion_ideology_totalitarian_society_selected }
        NOT = { has_variable = custom_religion_ideology_meritocratic_society_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_society_selected }

    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_IMPERIAL_CULT_SOCIETY_DESC"
            set_variable = {
                name = custom_religion_ideology_imperial_cult_society_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_imperial_cult_society = {
    name = "DESELECT_IDEOLOGY_IMPERIAL_CULT_SOCIETY"
    desc = "DESELECT_IDEOLOGY_IMPERIAL_CULT_SOCIETY_DESC"

    visible = {
        has_variable = custom_religion_ideology_imperial_cult_society_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_IMPERIAL_CULT_SOCIETY_DESC"
            remove_variable = custom_religion_ideology_imperial_cult_society_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_theocratic_society = {
    name = "SELECT_IDEOLOGY_THEOCRATIC_SOCIETY"
    desc = "SELECT_IDEOLOGY_THEOCRATIC_SOCIETY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_theocratic_society_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_traditionalist_society_selected }
        NOT = { has_variable = custom_religion_ideology_inclusive_society_selected }
        NOT = { has_variable = custom_religion_ideology_totalitarian_society_selected }
        NOT = { has_variable = custom_religion_ideology_meritocratic_society_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_society_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_THEOCRATIC_SOCIETY_DESC"
            set_variable = {
                name = custom_religion_ideology_theocratic_society_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_theocratic_society = {
    name = "DESELECT_IDEOLOGY_THEOCRATIC_SOCIETY"
    desc = "DESELECT_IDEOLOGY_THEOCRATIC_SOCIETY_DESC"

    visible = {
        has_variable = custom_religion_ideology_theocratic_society_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_THEOCRATIC_SOCIETY_DESC"
            remove_variable = custom_religion_ideology_theocratic_society_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_aristocratic_governance = {
    name = "SELECT_IDEOLOGY_ARISTOCRATIC_GOVERNANCE"
    desc = "SELECT_IDEOLOGY_ARISTOCRATIC_GOVERNANCE_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_aristocratic_governance_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_technocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_republican_governance_selected }
        NOT = { has_variable = custom_religion_ideology_corporate_governance_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_governance_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_governance_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_ARISTOCRATIC_GOVERNANCE_DESC"
            set_variable = {
                name = custom_religion_ideology_aristocratic_governance_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_aristocratic_governance = {
    name = "DESELECT_IDEOLOGY_ARISTOCRATIC_GOVERNANCE"
    desc = "DESELECT_IDEOLOGY_ARISTOCRATIC_GOVERNANCE_DESC"

    visible = {
        has_variable = custom_religion_ideology_aristocratic_governance_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_ARISTOCRATIC_GOVERNANCE_DESC"
            remove_variable = custom_religion_ideology_aristocratic_governance_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_technocratic_governance = {
    name = "SELECT_IDEOLOGY_TECHNOCRATIC_GOVERNANCE"
    desc = "SELECT_IDEOLOGY_TECHNOCRATIC_GOVERNANCE_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_technocratic_governance_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_aristocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_republican_governance_selected }
        NOT = { has_variable = custom_religion_ideology_corporate_governance_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_governance_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_governance_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_TECHNOCRATIC_GOVERNANCE_DESC"
            set_variable = {
                name = custom_religion_ideology_technocratic_governance_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_technocratic_governance = {
    name = "DESELECT_IDEOLOGY_TECHNOCRATIC_GOVERNANCE"
    desc = "DESELECT_IDEOLOGY_TECHNOCRATIC_GOVERNANCE_DESC"

    visible = {
        has_variable = custom_religion_ideology_technocratic_governance_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_TECHNOCRATIC_GOVERNANCE_DESC"
            remove_variable = custom_religion_ideology_technocratic_governance_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_republican_governance = {
    name = "SELECT_IDEOLOGY_REPUBLICAN_GOVERNANCE"
    desc = "SELECT_IDEOLOGY_REPUBLICAN_GOVERNANCE_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_republican_governance_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_aristocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_technocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_corporate_governance_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_governance_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_governance_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_REPUBLICAN_GOVERNANCE_DESC"
            set_variable = {
                name = custom_religion_ideology_republican_governance_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_republican_governance = {
    name = "DESELECT_IDEOLOGY_REPUBLICAN_GOVERNANCE"
    desc = "DESELECT_IDEOLOGY_REPUBLICAN_GOVERNANCE_DESC"

    visible = {
        has_variable = custom_religion_ideology_republican_governance_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_REPUBLICAN_GOVERNANCE_DESC"
            remove_variable = custom_religion_ideology_republican_governance_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_corporate_governance = {
    name = "SELECT_IDEOLOGY_CORPORATE_GOVERNANCE"
    desc = "SELECT_IDEOLOGY_CORPORATE_GOVERNANCE_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_corporate_governance_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_aristocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_technocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_republican_governance_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_governance_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_governance_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_CORPORATE_GOVERNANCE_DESC"
            set_variable = {
                name = custom_religion_ideology_corporate_governance_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_corporate_governance = {
    name = "DESELECT_IDEOLOGY_CORPORATE_GOVERNANCE"
    desc = "DESELECT_IDEOLOGY_CORPORATE_GOVERNANCE_DESC"

    visible = {
        has_variable = custom_religion_ideology_corporate_governance_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_CORPORATE_GOVERNANCE_DESC"
            remove_variable = custom_religion_ideology_corporate_governance_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_imperial_cult_governance = {
    name = "SELECT_IDEOLOGY_IMPERIAL_CULT_GOVERNANCE"
    desc = "SELECT_IDEOLOGY_IMPERIAL_CULT_GOVERNANCE_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_imperial_cult_governance_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_aristocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_technocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_republican_governance_selected }
        NOT = { has_variable = custom_religion_ideology_corporate_governance_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_governance_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_IMPERIAL_CULT_GOVERNANCE_DESC"
            set_variable = {
                name = custom_religion_ideology_imperial_cult_governance_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_imperial_cult_governance = {
    name = "DESELECT_IDEOLOGY_IMPERIAL_CULT_GOVERNANCE"
    desc = "DESELECT_IDEOLOGY_IMPERIAL_CULT_GOVERNANCE_DESC"

    visible = {
        has_variable = custom_religion_ideology_imperial_cult_governance_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_IMPERIAL_CULT_GOVERNANCE_DESC"
            remove_variable = custom_religion_ideology_imperial_cult_governance_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_theocratic_governance = {
    name = "SELECT_IDEOLOGY_THEOCRATIC_GOVERNANCE"
    desc = "SELECT_IDEOLOGY_THEOCRATIC_GOVERNANCE_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_theocratic_governance_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_aristocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_technocratic_governance_selected }
        NOT = { has_variable = custom_religion_ideology_republican_governance_selected }
        NOT = { has_variable = custom_religion_ideology_corporate_governance_selected }
        NOT = { has_variable = custom_religion_ideology_imperial_cult_governance_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_THEOCRATIC_GOVERNANCE_DESC"
            set_variable = {
                name = custom_religion_ideology_theocratic_governance_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_theocratic_governance = {
    name = "DESELECT_IDEOLOGY_THEOCRATIC_GOVERNANCE"
    desc = "DESELECT_IDEOLOGY_THEOCRATIC_GOVERNANCE_DESC"

    visible = {
        has_variable = custom_religion_ideology_theocratic_governance_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_THEOCRATIC_GOVERNANCE_DESC"
            remove_variable = custom_religion_ideology_theocratic_governance_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_pacifist_outlook = {
    name = "SELECT_IDEOLOGY_PACIFIST_OUTLOOK"
    desc = "SELECT_IDEOLOGY_PACIFIST_OUTLOOK_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_pacifist_outlook_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_militarist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_isolationist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_exploitative_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_imperialist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_outlook_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_PACIFIST_OUTLOOK_DESC"
            set_variable = {
                name = custom_religion_ideology_pacifist_outlook_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_pacifist_outlook = {
    name = "DESELECT_IDEOLOGY_PACIFIST_OUTLOOK"
    desc = "DESELECT_IDEOLOGY_PACIFIST_OUTLOOK_DESC"

    visible = {
        has_variable = custom_religion_ideology_pacifist_outlook_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_PACIFIST_OUTLOOK_DESC"
            remove_variable = custom_religion_ideology_pacifist_outlook_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_militarist_outlook = {
    name = "SELECT_IDEOLOGY_MILITARIST_OUTLOOK"
    desc = "SELECT_IDEOLOGY_MILITARIST_OUTLOOK_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_militarist_outlook_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_pacifist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_isolationist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_exploitative_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_imperialist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_outlook_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_MILITARIST_OUTLOOK_DESC"
            set_variable = {
                name = custom_religion_ideology_militarist_outlook_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_militarist_outlook = {
    name = "DESELECT_IDEOLOGY_MILITARIST_OUTLOOK"
    desc = "DESELECT_IDEOLOGY_MILITARIST_OUTLOOK_DESC"

    visible = {
        has_variable = custom_religion_ideology_militarist_outlook_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_MILITARIST_OUTLOOK_DESC"
            remove_variable = custom_religion_ideology_militarist_outlook_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_isolationist_outlook = {
    name = "SELECT_IDEOLOGY_ISOLATIONIST_OUTLOOK"
    desc = "SELECT_IDEOLOGY_ISOLATIONIST_OUTLOOK_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_isolationist_outlook_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_pacifist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_militarist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_exploitative_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_imperialist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_outlook_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_ISOLATIONIST_OUTLOOK_DESC"
            set_variable = {
                name = custom_religion_ideology_isolationist_outlook_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_isolationist_outlook = {
    name = "DESELECT_IDEOLOGY_ISOLATIONIST_OUTLOOK"
    desc = "DESELECT_IDEOLOGY_ISOLATIONIST_OUTLOOK_DESC"

    visible = {
        has_variable = custom_religion_ideology_isolationist_outlook_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_ISOLATIONIST_OUTLOOK_DESC"
            remove_variable = custom_religion_ideology_isolationist_outlook_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_exploitative_outlook = {
    name = "SELECT_IDEOLOGY_EXPLOITATIVE_OUTLOOK"
    desc = "SELECT_IDEOLOGY_EXPLOITATIVE_OUTLOOK_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_exploitative_outlook_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_pacifist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_militarist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_isolationist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_imperialist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_outlook_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_EXPLOITATIVE_OUTLOOK_DESC"
            set_variable = {
                name = custom_religion_ideology_exploitative_outlook_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_exploitative_outlook = {
    name = "DESELECT_IDEOLOGY_EXPLOITATIVE_OUTLOOK"
    desc = "DESELECT_IDEOLOGY_EXPLOITATIVE_OUTLOOK_DESC"

    visible = {
        has_variable = custom_religion_ideology_exploitative_outlook_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_EXPLOITATIVE_OUTLOOK_DESC"
            remove_variable = custom_religion_ideology_exploitative_outlook_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_imperialist_outlook = {
    name = "SELECT_IDEOLOGY_IMPERIALIST_OUTLOOK"
    desc = "SELECT_IDEOLOGY_IMPERIALIST_OUTLOOK_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_imperialist_outlook_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_pacifist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_militarist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_isolationist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_exploitative_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_theocratic_outlook_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_IMPERIALIST_OUTLOOK_DESC"
            set_variable = {
                name = custom_religion_ideology_imperialist_outlook_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_imperialist_outlook = {
    name = "DESELECT_IDEOLOGY_IMPERIALIST_OUTLOOK"
    desc = "DESELECT_IDEOLOGY_IMPERIALIST_OUTLOOK_DESC"

    visible = {
        has_variable = custom_religion_ideology_imperialist_outlook_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_IMPERIALIST_OUTLOOK_DESC"
            remove_variable = custom_religion_ideology_imperialist_outlook_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_ideology_theocratic_outlook = {
    name = "SELECT_IDEOLOGY_THEOCRATIC_OUTLOOK"
    desc = "SELECT_IDEOLOGY_THEOCRATIC_OUTLOOK_DESC"

    visible = {
        NOT = { has_variable = custom_religion_ideology_theocratic_outlook_selected }
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies < 3
        NOT = { has_variable = custom_religion_ideology_pacifist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_militarist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_isolationist_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_exploitative_outlook_selected }
        NOT = { has_variable = custom_religion_ideology_imperialist_outlook_selected }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_IDEOLOGY_THEOCRATIC_OUTLOOK_DESC"
            set_variable = {
                name = custom_religion_ideology_theocratic_outlook_selected
                value = 1
            }
            change_variable = {
                name = selected_idelogies
                add = 1
            }
        }
    }
}

deselect_ideology_theocratic_outlook = {
    name = "DESELECT_IDEOLOGY_THEOCRATIC_OUTLOOK"
    desc = "DESELECT_IDEOLOGY_THEOCRATIC_OUTLOOK_DESC"

    visible = {
        has_variable = custom_religion_ideology_theocratic_outlook_selected
        var:current_stage = 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_idelogies > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_IDEOLOGY_THEOCRATIC_OUTLOOK_DESC"
            remove_variable = custom_religion_ideology_theocratic_outlook_selected
            change_variable = {
                name = selected_idelogies
                subtract = 1
            }
        }
    }
}

select_trait_traditionalist_loyal = {
    name = "SELECT_TRAIT_TRADITIONALIST_LOYAL"
    desc = "SELECT_TRAIT_TRADITIONALIST_LOYAL_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_traditionalist_loyal_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_traditionalist_economy_selected
            has_variable = custom_religion_ideology_traditionalist_society_selected
            has_variable = custom_religion_ideology_aristocratic_governance_selected
            has_variable = custom_religion_ideology_isolationist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_loyal_selected
            has_variable = custom_religion_trait_social_democrat_loyal_selected
            has_variable = custom_religion_trait_totalitarian_loyal_selected
            has_variable = custom_religion_trait_imperial_cult_loyal_selected
            has_variable = custom_religion_trait_theocratic_loyal_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_TRADITIONALIST_LOYAL_DESC"
            set_variable = {
                name = custom_religion_trait_traditionalist_loyal_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_traditionalist_loyal = {
    name = "DESELECT_TRAIT_TRADITIONALIST_LOYAL"
    desc = "DESELECT_TRAIT_TRADITIONALIST_LOYAL_DESC"

    visible = {
        has_variable = custom_religion_trait_traditionalist_loyal_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_TRADITIONALIST_LOYAL_DESC"
            remove_variable = custom_religion_trait_traditionalist_loyal_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_traditionalist_happy = {
    name = "SELECT_TRAIT_TRADITIONALIST_HAPPY"
    desc = "SELECT_TRAIT_TRADITIONALIST_HAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_traditionalist_happy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_traditionalist_economy_selected
            has_variable = custom_religion_ideology_traditionalist_society_selected
            has_variable = custom_religion_ideology_aristocratic_governance_selected
            has_variable = custom_religion_ideology_isolationist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_happy_selected
            has_variable = custom_religion_trait_social_democrat_happy_selected
            has_variable = custom_religion_trait_totalitarian_happy_selected
            has_variable = custom_religion_trait_imperial_cult_happy_selected
            has_variable = custom_religion_trait_theocratic_happy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_TRADITIONALIST_HAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_traditionalist_happy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_traditionalist_happy = {
    name = "DESELECT_TRAIT_TRADITIONALIST_HAPPY"
    desc = "DESELECT_TRAIT_TRADITIONALIST_HAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_traditionalist_happy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_TRADITIONALIST_HAPPY_DESC"
            remove_variable = custom_religion_trait_traditionalist_happy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_traditionalist_unhappy = {
    name = "SELECT_TRAIT_TRADITIONALIST_UNHAPPY"
    desc = "SELECT_TRAIT_TRADITIONALIST_UNHAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_traditionalist_unhappy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_traditionalist_economy_selected
            has_variable = custom_religion_ideology_traditionalist_society_selected
            has_variable = custom_religion_ideology_aristocratic_governance_selected
            has_variable = custom_religion_ideology_isolationist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_unhappy_selected
            has_variable = custom_religion_trait_social_democrat_unhappy_selected
            has_variable = custom_religion_trait_totalitarian_unhappy_selected
            has_variable = custom_religion_trait_imperial_cult_unhappy_selected
            has_variable = custom_religion_trait_theocratic_unhappy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_TRADITIONALIST_UNHAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_traditionalist_unhappy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_traditionalist_unhappy = {
    name = "DESELECT_TRAIT_TRADITIONALIST_UNHAPPY"
    desc = "DESELECT_TRAIT_TRADITIONALIST_UNHAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_traditionalist_unhappy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_TRADITIONALIST_UNHAPPY_DESC"
            remove_variable = custom_religion_trait_traditionalist_unhappy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_market_liberal_loyal = {
    name = "SELECT_TRAIT_MARKET_LIBERAL_LOYAL"
    desc = "SELECT_TRAIT_MARKET_LIBERAL_LOYAL_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_market_liberal_loyal_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_free_market_economy_selected
            has_variable = custom_religion_ideology_meritocratic_society_selected
            has_variable = custom_religion_ideology_corporate_governance_selected
            has_variable = custom_religion_ideology_exploitative_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_social_democrat_loyal_selected
            has_variable = custom_religion_trait_totalitarian_loyal_selected
            has_variable = custom_religion_trait_traditionalist_loyal_selected
            has_variable = custom_religion_trait_imperial_cult_loyal_selected
            has_variable = custom_religion_trait_theocratic_loyal_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_MARKET_LIBERAL_LOYAL_DESC"
            set_variable = {
                name = custom_religion_trait_market_liberal_loyal_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_market_liberal_loyal = {
    name = "DESELECT_TRAIT_MARKET_LIBERAL_LOYAL"
    desc = "DESELECT_TRAIT_MARKET_LIBERAL_LOYAL_DESC"

    visible = {
        has_variable = custom_religion_trait_market_liberal_loyal_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_MARKET_LIBERAL_LOYAL_DESC"
            remove_variable = custom_religion_trait_market_liberal_loyal_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_market_liberal_happy = {
    name = "SELECT_TRAIT_MARKET_LIBERAL_HAPPY"
    desc = "SELECT_TRAIT_MARKET_LIBERAL_HAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_market_liberal_happy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_free_market_economy_selected
            has_variable = custom_religion_ideology_meritocratic_society_selected
            has_variable = custom_religion_ideology_corporate_governance_selected
            has_variable = custom_religion_ideology_exploitative_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_social_democrat_happy_selected
            has_variable = custom_religion_trait_totalitarian_happy_selected
            has_variable = custom_religion_trait_traditionalist_happy_selected
            has_variable = custom_religion_trait_imperial_cult_happy_selected
            has_variable = custom_religion_trait_theocratic_happy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_MARKET_LIBERAL_HAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_market_liberal_happy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_market_liberal_happy = {
    name = "DESELECT_TRAIT_MARKET_LIBERAL_HAPPY"
    desc = "DESELECT_TRAIT_MARKET_LIBERAL_HAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_market_liberal_happy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_MARKET_LIBERAL_HAPPY_DESC"
            remove_variable = custom_religion_trait_market_liberal_happy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_market_liberal_unhappy = {
    name = "SELECT_TRAIT_MARKET_LIBERAL_UNHAPPY"
    desc = "SELECT_TRAIT_MARKET_LIBERAL_UNHAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_market_liberal_unhappy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_free_market_economy_selected
            has_variable = custom_religion_ideology_meritocratic_society_selected
            has_variable = custom_religion_ideology_corporate_governance_selected
            has_variable = custom_religion_ideology_exploitative_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_social_democrat_unhappy_selected
            has_variable = custom_religion_trait_totalitarian_unhappy_selected
            has_variable = custom_religion_trait_traditionalist_unhappy_selected
            has_variable = custom_religion_trait_imperial_cult_unhappy_selected
            has_variable = custom_religion_trait_theocratic_unhappy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_MARKET_LIBERAL_UNHAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_market_liberal_unhappy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_market_liberal_unhappy = {
    name = "DESELECT_TRAIT_MARKET_LIBERAL_UNHAPPY"
    desc = "DESELECT_TRAIT_MARKET_LIBERAL_UNHAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_market_liberal_unhappy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_MARKET_LIBERAL_UNHAPPY_DESC"
            remove_variable = custom_religion_trait_market_liberal_unhappy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_social_democrat_loyal = {
    name = "SELECT_TRAIT_SOCIAL_DEMOCRAT_LOYAL"
    desc = "SELECT_TRAIT_SOCIAL_DEMOCRAT_LOYAL_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_social_democrat_loyal_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_social_democratic_economy_selected
            has_variable = custom_religion_ideology_inclusive_society_selected
            has_variable = custom_religion_ideology_republican_governance_selected
            has_variable = custom_religion_ideology_pacifist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_loyal_selected
            has_variable = custom_religion_trait_totalitarian_loyal_selected
            has_variable = custom_religion_trait_traditionalist_loyal_selected
            has_variable = custom_religion_trait_imperial_cult_loyal_selected
            has_variable = custom_religion_trait_theocratic_loyal_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_SOCIAL_DEMOCRAT_LOYAL_DESC"
            set_variable = {
                name = custom_religion_trait_social_democrat_loyal_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_social_democrat_loyal = {
    name = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_LOYAL"
    desc = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_LOYAL_DESC"

    visible = {
        has_variable = custom_religion_trait_social_democrat_loyal_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_LOYAL_DESC"
            remove_variable = custom_religion_trait_social_democrat_loyal_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_social_democrat_happy = {
    name = "SELECT_TRAIT_SOCIAL_DEMOCRAT_HAPPY"
    desc = "SELECT_TRAIT_SOCIAL_DEMOCRAT_HAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_social_democrat_happy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_social_democratic_economy_selected
            has_variable = custom_religion_ideology_inclusive_society_selected
            has_variable = custom_religion_ideology_republican_governance_selected
            has_variable = custom_religion_ideology_pacifist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_happy_selected
            has_variable = custom_religion_trait_totalitarian_happy_selected
            has_variable = custom_religion_trait_traditionalist_happy_selected
            has_variable = custom_religion_trait_imperial_cult_happy_selected
            has_variable = custom_religion_trait_theocratic_happy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_SOCIAL_DEMOCRAT_HAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_social_democrat_happy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_social_democrat_happy = {
    name = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_HAPPY"
    desc = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_HAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_social_democrat_happy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_HAPPY_DESC"
            remove_variable = custom_religion_trait_social_democrat_happy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_social_democrat_unhappy = {
    name = "SELECT_TRAIT_SOCIAL_DEMOCRAT_UNHAPPY"
    desc = "SELECT_TRAIT_SOCIAL_DEMOCRAT_UNHAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_social_democrat_unhappy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_social_democratic_economy_selected
            has_variable = custom_religion_ideology_inclusive_society_selected
            has_variable = custom_religion_ideology_republican_governance_selected
            has_variable = custom_religion_ideology_pacifist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_unhappy_selected
            has_variable = custom_religion_trait_totalitarian_unhappy_selected
            has_variable = custom_religion_trait_traditionalist_unhappy_selected
            has_variable = custom_religion_trait_imperial_cult_unhappy_selected
            has_variable = custom_religion_trait_theocratic_unhappy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_SOCIAL_DEMOCRAT_UNHAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_social_democrat_unhappy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_social_democrat_unhappy = {
    name = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_UNHAPPY"
    desc = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_UNHAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_social_democrat_unhappy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_SOCIAL_DEMOCRAT_UNHAPPY_DESC"
            remove_variable = custom_religion_trait_social_democrat_unhappy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_totalitarian_loyal = {
    name = "SELECT_TRAIT_TOTALITARIAN_LOYAL"
    desc = "SELECT_TRAIT_TOTALITARIAN_LOYAL_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_totalitarian_loyal_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_socialist_economy_selected
            has_variable = custom_religion_ideology_totalitarian_society_selected
            has_variable = custom_religion_ideology_technocratic_governance_selected
            has_variable = custom_religion_ideology_militarist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_loyal_selected
            has_variable = custom_religion_trait_social_democrat_loyal_selected
            has_variable = custom_religion_trait_traditionalist_loyal_selected
            has_variable = custom_religion_trait_imperial_cult_loyal_selected
            has_variable = custom_religion_trait_theocratic_loyal_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_TOTALITARIAN_LOYAL_DESC"
            set_variable = {
                name = custom_religion_trait_totalitarian_loyal_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_totalitarian_loyal = {
    name = "DESELECT_TRAIT_TOTALITARIAN_LOYAL"
    desc = "DESELECT_TRAIT_TOTALITARIAN_LOYAL_DESC"

    visible = {
        has_variable = custom_religion_trait_totalitarian_loyal_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_TOTALITARIAN_LOYAL_DESC"
            remove_variable = custom_religion_trait_totalitarian_loyal_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_totalitarian_happy = {
    name = "SELECT_TRAIT_TOTALITARIAN_HAPPY"
    desc = "SELECT_TRAIT_TOTALITARIAN_HAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_totalitarian_happy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_socialist_economy_selected
            has_variable = custom_religion_ideology_totalitarian_society_selected
            has_variable = custom_religion_ideology_technocratic_governance_selected
            has_variable = custom_religion_ideology_militarist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_happy_selected
            has_variable = custom_religion_trait_social_democrat_happy_selected
            has_variable = custom_religion_trait_traditionalist_happy_selected
            has_variable = custom_religion_trait_imperial_cult_happy_selected
            has_variable = custom_religion_trait_theocratic_happy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_TOTALITARIAN_HAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_totalitarian_happy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_totalitarian_happy = {
    name = "DESELECT_TRAIT_TOTALITARIAN_HAPPY"
    desc = "DESELECT_TRAIT_TOTALITARIAN_HAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_totalitarian_happy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_TOTALITARIAN_HAPPY_DESC"
            remove_variable = custom_religion_trait_totalitarian_happy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_totalitarian_unhappy = {
    name = "SELECT_TRAIT_TOTALITARIAN_UNHAPPY"
    desc = "SELECT_TRAIT_TOTALITARIAN_UNHAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_totalitarian_unhappy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_social
            has_variable = custom_religion_ideology_totalitarian_society_selected
            has_variable = custom_religion_ideology_technocratic_governance_selected
            has_variable = custom_religion_ideology_militarist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_unhappy_selected
            has_variable = custom_religion_trait_social_democrat_unhappy_selected
            has_variable = custom_religion_trait_traditionalist_unhappy_selected
            has_variable = custom_religion_trait_imperial_cult_unhappy_selected
            has_variable = custom_religion_trait_theocratic_unhappy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_TOTALITARIAN_UNHAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_totalitarian_unhappy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_totalitarian_unhappy = {
    name = "DESELECT_TRAIT_TOTALITARIAN_UNHAPPY"
    desc = "DESELECT_TRAIT_TOTALITARIAN_UNHAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_totalitarian_unhappy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_TOTALITARIAN_UNHAPPY_DESC"
            remove_variable = custom_religion_trait_totalitarian_unhappy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_imperial_cult_loyal = {
    name = "SELECT_TRAIT_IMPERIAL_CULT_LOYAL"
    desc = "SELECT_TRAIT_IMPERIAL_CULT_LOYAL_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_imperial_cult_loyal_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_imperial_cult_economy_selected
            has_variable = custom_religion_ideology_imperial_cult_society_selected
            has_variable = custom_religion_ideology_imperial_cult_governance_selected
            has_variable = custom_religion_ideology_imperialist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_loyal_selected
            has_variable = custom_religion_trait_social_democrat_loyal_selected
            has_variable = custom_religion_trait_totalitarian_loyal_selected
            has_variable = custom_religion_trait_traditionalist_loyal_selected
            has_variable = custom_religion_trait_theocratic_loyal_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_IMPERIAL_CULT_LOYAL_DESC"
            set_variable = {
                name = custom_religion_trait_imperial_cult_loyal_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_imperial_cult_loyal = {
    name = "DESELECT_TRAIT_IMPERIAL_CULT_LOYAL"
    desc = "DESELECT_TRAIT_IMPERIAL_CULT_LOYAL_DESC"

    visible = {
        has_variable = custom_religion_trait_imperial_cult_loyal_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_IMPERIAL_CULT_LOYAL_DESC"
            remove_variable = custom_religion_trait_imperial_cult_loyal_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_imperial_cult_happy = {
    name = "SELECT_TRAIT_IMPERIAL_CULT_HAPPY"
    desc = "SELECT_TRAIT_IMPERIAL_CULT_HAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_imperial_cult_happy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_imperial_cult_economy_selected
            has_variable = custom_religion_ideology_imperial_cult_society_selected
            has_variable = custom_religion_ideology_imperial_cult_governance_selected
            has_variable = custom_religion_ideology_imperialist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_happy_selected
            has_variable = custom_religion_trait_social_democrat_happy_selected
            has_variable = custom_religion_trait_totalitarian_happy_selected
            has_variable = custom_religion_trait_traditionalist_happy_selected
            has_variable = custom_religion_trait_theocratic_happy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_IMPERIAL_CULT_HAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_imperial_cult_happy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_imperial_cult_happy = {
    name = "DESELECT_TRAIT_IMPERIAL_CULT_HAPPY"
    desc = "DESELECT_TRAIT_IMPERIAL_CULT_HAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_imperial_cult_happy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_IMPERIAL_CULT_HAPPY_DESC"
            remove_variable = custom_religion_trait_imperial_cult_happy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_imperial_cult_unhappy = {
    name = "SELECT_TRAIT_IMPERIAL_CULT_UNHAPPY"
    desc = "SELECT_TRAIT_IMPERIAL_CULT_UNHAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_imperial_cult_unhappy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_imperial_cult_economy_selected
            has_variable = custom_religion_ideology_imperial_cult_society_selected
            has_variable = custom_religion_ideology_imperial_cult_governance_selected
            has_variable = custom_religion_ideology_imperialist_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_unhappy_selected
            has_variable = custom_religion_trait_social_democrat_unhappy_selected
            has_variable = custom_religion_trait_totalitarian_unhappy_selected
            has_variable = custom_religion_trait_traditionalist_unhappy_selected
            has_variable = custom_religion_trait_theocratic_unhappy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_IMPERIAL_CULT_UNHAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_imperial_cult_unhappy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_imperial_cult_unhappy = {
    name = "DESELECT_TRAIT_IMPERIAL_CULT_UNHAPPY"
    desc = "DESELECT_TRAIT_IMPERIAL_CULT_UNHAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_imperial_cult_unhappy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_IMPERIAL_CULT_UNHAPPY_DESC"
            remove_variable = custom_religion_trait_imperial_cult_unhappy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_theocratic_loyal = {
    name = "SELECT_TRAIT_THEOCRATIC_LOYAL"
    desc = "SELECT_TRAIT_THEOCRATIC_LOYAL_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_theocratic_loyal_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_theocratic_economy_selected
            has_variable = custom_religion_ideology_theocratic_society_selected
            has_variable = custom_religion_ideology_theocratic_governance_selected
            has_variable = custom_religion_ideology_theocratic_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_loyal_selected
            has_variable = custom_religion_trait_social_democrat_loyal_selected
            has_variable = custom_religion_trait_totalitarian_loyal_selected
            has_variable = custom_religion_trait_traditionalist_loyal_selected
            has_variable = custom_religion_trait_imperial_cult_loyal_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_THEOCRATIC_LOYAL_DESC"
            set_variable = {
                name = custom_religion_trait_theocratic_loyal_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_theocratic_loyal = {
    name = "DESELECT_TRAIT_THEOCRATIC_LOYAL"
    desc = "DESELECT_TRAIT_THEOCRATIC_LOYAL_DESC"

    visible = {
        has_variable = custom_religion_trait_theocratic_loyal_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_THEOCRATIC_LOYAL_DESC"
            remove_variable = custom_religion_trait_theocratic_loyal_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_theocratic_happy = {
    name = "SELECT_TRAIT_THEOCRATIC_HAPPY"
    desc = "SELECT_TRAIT_THEOCRATIC_HAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_theocratic_happy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_theocratic_economy_selected
            has_variable = custom_religion_ideology_theocratic_society_selected
            has_variable = custom_religion_ideology_theocratic_governance_selected
            has_variable = custom_religion_ideology_theocratic_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_happy_selected
            has_variable = custom_religion_trait_social_democrat_happy_selected
            has_variable = custom_religion_trait_totalitarian_happy_selected
            has_variable = custom_religion_trait_traditionalist_happy_selected
            has_variable = custom_religion_trait_imperial_cult_happy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_THEOCRATIC_HAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_theocratic_happy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_theocratic_happy = {
    name = "DESELECT_TRAIT_THEOCRATIC_HAPPY"
    desc = "DESELECT_TRAIT_THEOCRATIC_HAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_theocratic_happy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_THEOCRATIC_HAPPY_DESC"
            remove_variable = custom_religion_trait_theocratic_happy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}

select_trait_theocratic_unhappy = {
    name = "SELECT_TRAIT_THEOCRATIC_UNHAPPY"
    desc = "SELECT_TRAIT_THEOCRATIC_UNHAPPY_DESC"

    visible = {
        NOT = { has_variable = custom_religion_trait_theocratic_unhappy_selected }
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits < 3
        OR = {
            has_variable = custom_religion_ideology_theocratic_economy_selected
            has_variable = custom_religion_ideology_theocratic_society_selected
            has_variable = custom_religion_ideology_theocratic_governance_selected
            has_variable = custom_religion_ideology_theocratic_outlook_selected
        }
        NOT = {
            has_variable = custom_religion_trait_market_liberal_unhappy_selected
            has_variable = custom_religion_trait_social_democrat_unhappy_selected
            has_variable = custom_religion_trait_totalitarian_unhappy_selected
            has_variable = custom_religion_trait_traditionalist_unhappy_selected
            has_variable = custom_religion_trait_imperial_cult_unhappy_selected
        }
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_TRAIT_THEOCRATIC_UNHAPPY_DESC"
            set_variable = {
                name = custom_religion_trait_theocratic_unhappy_selected
                value = 1
            }
            change_variable = {
                name = selected_traits
                add = 1
            }
        }
    }
}

deselect_trait_theocratic_unhappy = {
    name = "DESELECT_TRAIT_THEOCRATIC_UNHAPPY"
    desc = "DESELECT_TRAIT_THEOCRATIC_UNHAPPY_DESC"

    visible = {
        has_variable = custom_religion_trait_theocratic_unhappy_selected
        var:current_stage = 2
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_traits > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_TRAIT_THEOCRATIC_UNHAPPY_DESC"
            remove_variable = custom_religion_trait_theocratic_unhappy_selected
            change_variable = {
                name = selected_traits
                subtract = 1
            }
        }
    }
}


select_name_a = {
    name = "custom_religion_name_a"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_a_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_a_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_a = {
    name = "custom_religion_name_a"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_a_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_a_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_b = {
    name = "custom_religion_name_b"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_b_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_b_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_b = {
    name = "custom_religion_name_b"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_b_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_b_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_c = {
    name = "custom_religion_name_c"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_c_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_c_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_c = {
    name = "custom_religion_name_c"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_c_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_c_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_d = {
    name = "custom_religion_name_d"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_d_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_d_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_d = {
    name = "custom_religion_name_d"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_d_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_d_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_e = {
    name = "custom_religion_name_e"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_e_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_e_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_e = {
    name = "custom_religion_name_e"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_e_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_e_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_f = {
    name = "custom_religion_name_f"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_f_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_f_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_f = {
    name = "custom_religion_name_f"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_f_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_f_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_g = {
    name = "custom_religion_name_g"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_g_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_g_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_g = {
    name = "custom_religion_name_g"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_g_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_g_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_h = {
    name = "custom_religion_name_h"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_h_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_h_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_h = {
    name = "custom_religion_name_h"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_h_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_h_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_i = {
    name = "custom_religion_name_i"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_i_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_i_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_i = {
    name = "custom_religion_name_i"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_i_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_i_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_j = {
    name = "custom_religion_name_j"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_j_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_j_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_j = {
    name = "custom_religion_name_j"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_j_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_j_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_k = {
    name = "custom_religion_name_k"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_k_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_k_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_k = {
    name = "custom_religion_name_k"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_k_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_k_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_l = {
    name = "custom_religion_name_l"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_l_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_l_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_l = {
    name = "custom_religion_name_l"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_l_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_l_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_m = {
    name = "custom_religion_name_m"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_m_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_m_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_m = {
    name = "custom_religion_name_m"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_m_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_m_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_n = {
    name = "custom_religion_name_n"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_n_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_n_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_n = {
    name = "custom_religion_name_n"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_n_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_n_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_o = {
    name = "custom_religion_name_o"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_o_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_o_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_o = {
    name = "custom_religion_name_o"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_o_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_o_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_p = {
    name = "custom_religion_name_p"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_p_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_p_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_p = {
    name = "custom_religion_name_p"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_p_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_p_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_q = {
    name = "custom_religion_name_q"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_q_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_q_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_q = {
    name = "custom_religion_name_q"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_q_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_q_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_r = {
    name = "custom_religion_name_r"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_r_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_r_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_r = {
    name = "custom_religion_name_r"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_r_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_r_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_s = {
    name = "custom_religion_name_s"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_s_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_s_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_s = {
    name = "custom_religion_name_s"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_s_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_s_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_name_t = {
    name = "custom_religion_name_t"
    desc = "SELECT_NAME_DESC"

    visible = {
        NOT = { has_variable = custom_religion_name_t_selected }
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_NAME_DESC"
            set_variable = {
                name = custom_religion_name_t_selected
                value = 1
            }
            change_variable = {
                name = selected_name
                add = 1
            }
        }
    }
}

deselect_name_t = {
    name = "custom_religion_name_t"
    desc = "DESELECT_NAME_DESC"

    visible = {
        has_variable = custom_religion_name_t_selected
        var:current_stage = 3
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_name > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_NAME_DESC"
            remove_variable = custom_religion_name_t_selected
            change_variable = {
                name = selected_name
                subtract = 1
            }
        }
    }
}

select_christian = {
    name = "SELECT_CHRISTIAN"
    desc = "SELECT_CHRISTIAN_DESC"

    visible = {
        var:current_stage = 4
        NOT = { has_variable = custom_religion_christian_selected }
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_CHRISTIAN_DESC"
            set_variable = {
                name = selected_religion_group
                value = 1
            }
            set_variable = {
                name = custom_religion_christian_selected
                value = 1
            }
        }
    }
}

deselect_christian = {
    name = "DESELECT_CHRISTIAN"
    desc = "DESELECT_CHRISTIAN_DESC"

    visible = {
        has_variable = custom_religion_christian_selected
        var:current_stage = 4
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_CHRISTIAN_DESC"
            remove_variable = custom_religion_christian_selected
            change_variable = {
                name = selected_religion_group
                subtract = 1
            }
        }
    }
}

select_muslim = {
    name = "SELECT_MUSLIM"
    desc = "SELECT_MUSLIM_DESC"

    visible = {
        var:current_stage = 4
        NOT = { has_variable = custom_religion_muslim_selected }
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_MUSLIM_DESC"
            set_variable = {
                name = selected_religion_group
                value = 1
            }
            set_variable = {
                name = custom_religion_muslim_selected
                value = 1
            }
        }
    }
}

deselect_muslim = {
    name = "DESELECT_MUSLIM"
    desc = "DESELECT_MUSLIM_DESC"

    visible = {
        has_variable = custom_religion_muslim_selected
        var:current_stage = 4
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_MUSLIM_DESC"
            remove_variable = custom_religion_muslim_selected
            change_variable = {
                name = selected_religion_group
                subtract = 1
            }
        }
    }
}

select_judaism = {
    name = "SELECT_JUDAISM"
    desc = "SELECT_JUDAISM_DESC"

    visible = {
        var:current_stage = 4
        NOT = { has_variable = custom_religion_judaism_selected }
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_JUDAISM_DESC"
            set_variable = {
                name = selected_religion_group
                value = 1
            }
            set_variable = {
                name = custom_religion_judaism_selected
                value = 1
            }
        }
    }
}

deselect_judaism = {
    name = "DESELECT_JUDAISM"
    desc = "DESELECT_JUDAISM_DESC"

    visible = {
        has_variable = custom_religion_judaism_selected
        var:current_stage = 4
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_JUDAISM_DESC"
            remove_variable = custom_religion_judaism_selected
            change_variable = {
                name = selected_religion_group
                subtract = 1
            }
        }
    }
}

select_eastern = {
    name = "SELECT_EASTERN"
    desc = "SELECT_EASTERN_DESC"

    visible = {
        var:current_stage = 4
        NOT = { has_variable = custom_religion_eastern_selected }
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_EASTERN_DESC"
            set_variable = {
                name = selected_religion_group
                value = 1
            }
            set_variable = {
                name = custom_religion_eastern_selected
                value = 1
            }
        }
    }
}

deselect_eastern = {
    name = "DESELECT_EASTERN"
    desc = "DESELECT_EASTERN_DESC"

    visible = {
        has_variable = custom_religion_eastern_selected
        var:current_stage = 4
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_EASTERN_DESC"
            remove_variable = custom_religion_eastern_selected
            change_variable = {
                name = selected_religion_group
                subtract = 1
            }
        }
    }
}

select_animist = {
    name = "SELECT_ANIMIST"
    desc = "SELECT_ANIMIST_DESC"

    visible = {
        var:current_stage = 4
        NOT = { has_variable = custom_religion_animist_selected }
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_ANIMIST_DESC"
            set_variable = {
                name = selected_religion_group
                value = 1
            }
            set_variable = {
                name = custom_religion_animist_selected
                value = 1
            }
        }
    }
}

deselect_animist = {
    name = "DESELECT_ANIMIST"
    desc = "DESELECT_ANIMIST_DESC"

    visible = {
        has_variable = custom_religion_animist_selected
        var:current_stage = 4
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_ANIMIST_DESC"
            remove_variable = custom_religion_animist_selected
            change_variable = {
                name = selected_religion_group
                subtract = 1
            }
        }
    }
}

select_buddhist = {
    name = "SELECT_BUDDHIST"
    desc = "SELECT_BUDDHIST_DESC"

    visible = {
        var:current_stage = 4
        NOT = { has_variable = custom_religion_buddhist_selected }
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_BUDDHIST_DESC"
            set_variable = {
                name = selected_religion_group
                value = 1
            }
            set_variable = {
                name = custom_religion_buddhist_selected
                value = 1
            }
        }
    }
}

deselect_buddhist = {
    name = "DESELECT_BUDDHIST"
    desc = "DESELECT_BUDDHIST_DESC"

    visible = {
        has_variable = custom_religion_buddhist_selected
        var:current_stage = 4
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_BUDDHIST_DESC"
            remove_variable = custom_religion_buddhist_selected
            change_variable = {
                name = selected_religion_group
                subtract = 1
            }
        }
    }
}

select_custom = {
    name = "SELECT_CUSTOM"
    desc = "SELECT_CUSTOM_DESC"

    visible = {
        var:current_stage = 4
        NOT = { has_variable = custom_religion_custom_selected }
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group < 1
    }

    effect = {
        custom_tooltip = {
            text = "SELECT_CUSTOM_DESC"
            set_variable = {
                name = selected_religion_group
                value = 1
            }
            set_variable = {
                name = custom_religion_custom_selected
                value = 1
            }
        }
    }
}

deselect_custom = {
    name = "DESELECT_CUSTOM"
    desc = "DESELECT_CUSTOM_DESC"

    visible = {
        has_variable = custom_religion_custom_selected
        var:current_stage = 4
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:selected_religion_group > 0
    }

    effect = {
        custom_tooltip = {
            text = "DESELECT_CUSTOM_DESC"
            remove_variable = custom_religion_custom_selected
            change_variable = {
                name = selected_religion_group
                subtract = 1
            }
        }
    }
}

custom_religion_back = {
    name = "CUSTOM_RELIGION_BACK"
    desc = "CUSTOM_RELIGION_BACK_DESC"

    visible = {
        var:current_stage > 1
    }

    ai_chance = {
        value = 0
    }

    possible = {
        var:current_stage > 1
    }

    effect = {
        custom_tooltip = {
            text = "CUSTOM_RELIGION_BACK_DESC"
            change_variable = {
                name = current_stage
                subtract = 1
            }
        }
    }
}

custom_religion_next = {
    name = "CUSTOM_RELIGION_NEXT"
    desc = "CUSTOM_RELIGION_NEXT_DESC"

    visible = {
        OR = {
            AND = {
                var:selected_idelogies = 3
                var:current_stage = 1
            }
            AND = {
                var:selected_traits = 3
                var:current_stage = 2
            }
            AND = {
                var:selected_name = 1
                var:current_stage = 3
            }
        }
    }

    ai_chance = {
        value = 0
    }

    possible = {
        always = yes
    }

    effect = {
        custom_tooltip = {
            text = "CUSTOM_RELIGION_NEXT_DESC"
            change_variable = {
                name = current_stage
                add = 1
            }
        }
    }
}

create_new_religion = {
    name = "CREATE_NEW_RELIGION"
    desc = "CREATE_NEW_RELIGION_DESC"

    visible = {
        var:selected_idelogies = 3
        var:selected_traits = 3
        var:selected_name = 1
        var:selected_religion_group = 1
        var:current_stage = 4
    }
    
    ai_chance = {
        value = 0
    }

    possible = {
        always = yes
    }

    effect = {
        custom_tooltip = {
            text = "CREATE_NEW_RELIGION_DESC"
            every_scope_character = {
                limit = {
                    interest_group = ROOT.ig:ig_devout
                }
                exile_character = yes
            }
            if = {
                limit = { has_variable = custom_religion_christian_selected }
                rel:custom_religion_christian = {
                    save_scope_as = custom_religion_scope
                }
            }
            if = {
                limit = { has_variable = custom_religion_muslim_selected }
                rel:custom_religion_muslim = {
                    save_scope_as = custom_religion_scope
                }
            }
            if = {
                limit = { has_variable = custom_religion_judaism_selected }
                rel:custom_religion_jewish = {
                    save_scope_as = custom_religion_scope
                }
            }
            if = {
                limit = { has_variable = custom_religion_eastern_selected }
                rel:custom_religion_eastern = {
                    save_scope_as = custom_religion_scope
                }
            }
            if = {
                limit = { has_variable = custom_religion_animist_selected }
                rel:custom_religion_animist = {
                    save_scope_as = custom_religion_scope
                }
            }
            if = {
                limit = { has_variable = custom_religion_buddhist_selected }
                rel:custom_religion_buddhist = {
                    save_scope_as = custom_religion_scope
                }
            }
            if = {
                limit = { has_variable = custom_religion_custom_selected }
                rel:custom_religion_custom = {
                    save_scope_as = custom_religion_scope
                }
            }
            set_state_religion = scope:custom_religion_scope
            ruler = {
                change_character_religion = scope:custom_religion_scope
            }
            heir ?= {
                change_character_religion = scope:custom_religion_scope
            }
            ig:ig_devout = {
                hidden_effect = { set_interest_group_name = custom_religion }
                # remove old ideologies
                remove_all_ideologies = yes
                # add relevant ideologies
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_traditionalist_economy_selected }}
                    add_ideology = ideology_custom_religion_traditionalist_economy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_free_market_economy_selected }}
                    add_ideology = ideology_custom_religion_free_market_economy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_socialist_economy_selected }}
                    add_ideology = ideology_custom_religion_socialist_economy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_social_democratic_economy_selected }}
                    add_ideology = ideology_custom_religion_social_democratic_economy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_imperial_cult_economy_selected }}
                    add_ideology = ideology_custom_religion_imperial_cult_economy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_theocratic_economy_selected }}
                    add_ideology = ideology_custom_religion_theocratic_economy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_traditionalist_society_selected }}
                    add_ideology = ideology_custom_religion_traditionalist_society
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_inclusive_society_selected }}
                    add_ideology = ideology_custom_religion_inclusive_society
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_totalitarian_society_selected }}
                    add_ideology = ideology_custom_religion_totalitarian_society
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_meritocratic_society_selected }}
                    add_ideology = ideology_custom_religion_meritocratic_society
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_imperial_cult_society_selected }}
                    add_ideology = ideology_custom_religion_imperial_cult_society
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_theocratic_society_selected }}
                    add_ideology = ideology_custom_religion_theocratic_society
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_aristocratic_governance_selected }}
                    add_ideology = ideology_custom_religion_aristocratic_governance
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_technocratic_governance_selected }}
                    add_ideology = ideology_custom_religion_technocratic_governance
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_republican_governance_selected }}
                    add_ideology = ideology_custom_religion_republican_governance
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_corporate_governance_selected }}
                    add_ideology = ideology_custom_religion_corporate_governance
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_imperial_cult_governance_selected }}
                    add_ideology = ideology_custom_religion_imperial_cult_governance
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_theocratic_governance_selected }}
                    add_ideology = ideology_custom_religion_theocratic_governance
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_pacifist_outlook_selected }}
                    add_ideology = ideology_custom_religion_pacifist_outlook
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_militarist_outlook_selected }}
                    add_ideology = ideology_custom_religion_militarist_outlook
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_isolationist_outlook_selected }}
                    add_ideology = ideology_custom_religion_isolationist_outlook
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_exploitative_outlook_selected }}
                    add_ideology = ideology_custom_religion_exploitative_outlook
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_imperialist_outlook_selected }}
                    add_ideology = ideology_custom_religion_imperialist_outlook
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_ideology_theocratic_outlook_selected }}
                    add_ideology = ideology_custom_religion_theocratic_outlook
                }
                # set ig traits
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_traditionalist_loyal_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_traditionalist_loyal
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_traditionalist_happy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_traditionalist_happy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_traditionalist_unhappy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_traditionalist_unhappy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_market_liberal_loyal_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_market_liberal_loyal
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_market_liberal_happy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_market_liberal_happy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_market_liberal_unhappy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_market_liberal_unhappy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_social_democrat_loyal_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_social_democrat_loyal
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_social_democrat_happy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_social_democrat_happy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_social_democrat_unhappy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_social_democrat_unhappy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_totalitarian_loyal_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_totalitarian_loyal
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_totalitarian_happy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_totalitarian_happy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_totalitarian_unhappy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_totalitarian_unhappy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_imperial_cult_loyal_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_imperial_cult_loyal
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_imperial_cult_happy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_imperial_cult_happy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_imperial_cult_unhappy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_imperial_cult_unhappy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_theocratic_loyal_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_theocratic_loyal
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_theocratic_happy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_theocratic_happy
                }
                if = {
                    limit = { ROOT = { has_variable = custom_religion_trait_theocratic_unhappy_selected }}
                    set_ig_trait = ig_trait:ig_trait_custom_religion_theocratic_unhappy
                }
            }
            random_scope_state = {
                limit = {
                    owner = ROOT
                    is_capital = yes
                }
                convert_population = {
                    target = scope:custom_religion_scope
                    value = 0.2
                }
            }
            every_scope_state = {
                limit = {
                    owner = ROOT
                    is_incorporated = yes
                    NOT = { is_capital = yes }
                }
                convert_population = {
                    target = scope:custom_religion_scope
                    value = 0.1
                }
            }
        }
    }
}