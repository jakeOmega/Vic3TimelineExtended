gdp_per_capita = {
	value = gdp
	divide = state_population
}

peaceful_annex_gdp_requirement = {
	value = overlord.gdp
	multiply = peaceful_annex_gdp_requirement_multiplier
	divide = 100
}

peaceful_annex_gdp_requirement_multiplier = 10

ministry_of_science_monthly_effect = -1
ministry_of_thought_control_monthly_effect = 0.001

construction_cost_super_high = 2000
construction_cost_mega_high = 5000

war_support_training_decrease = {
	value = 0
	every_combat_unit = {
		add = -1
	}
	owner = {
		divide = army_size
	}
	multiply = 100
}

assassinate_success_chance_domestic = {
	value = 0
	owner = {
		institution:institution_ministry_of_intelligence_and_security = {
			add = investment
			multiply = 5
		}
		if = {
			limit = {
				has_law = law_type:law_secret_police
			}
			institution:institution_home_affairs = {
				add = investment
				multiply = 15
			}
		}
	}
	max = 90
}

assassinate_success_chance_foreign = {
	value = 0
	owner = {
		institution:institution_ministry_of_intelligence_and_security = {
			add = investment
			multiply = 20
		}
	}
	max = 90
}

reveal_assassination_chance_domestic = {
	value = 100
	subtract = assassinate_success_chance_domestic
	min = 10
}

reveal_assassination_chance_foreign = {
	value = 90
	subtract = assassinate_success_chance_foreign
	min = 10
}

#max_investment_pool_before_on_action = {
#	value = investment_pool_gross_income
#	multiply = 75
#	min = 1000000
#}

max_investment_pool_before_on_action = 1000000

needed_private_levels = {
	value = total_construction_use_target
	divide = modifier:country_max_weekly_construction_progress_add
	multiply = 2
	subtract = construction_queue_num_queued_private_levels
	floor = yes
	max = 10000
}

expand_levels = 1

available_principle_slots = {
	value = 1
	if = {
		limit = {
			hidden_trigger = {
				has_dlc_feature = power_bloc_features
			}
		}
		add = 1
		if = {
			limit = {
				power_bloc_rank <= 5
				num_power_bloc_members >= 5
			}
			add = 1
		}
		if = {
			limit = {
				power_bloc_rank <= 3
				num_power_bloc_members >= 10
			}
			add = 1
		}
		if = {
			limit = {
				power_bloc_leader = { has_technology_researched = intergovernmental_organizations }
			}
			add = 1
		}
		if = {
			limit = {
				power_bloc_leader = { has_technology_researched = decolonization }
			}
			add = 1
		}
		if = {
			limit = {
				power_bloc_leader = { has_technology_researched = cellular_networks }
			}
			add = 1
		}
		if = {
			limit = {
				power_bloc_leader = { has_technology_researched = globalization }
			}
			add = 1
		}
	}
}

starting_investment_pool = {
	value = gdp
	multiply = literacy_rate
	multiply = literacy_rate
	if = {
		limit = {
			OR = {
				has_law = law_type:law_traditionalism
				has_law = law_type:law_industry_banned
			}
		}
		multiply = 0.5
	}
	if = {
		limit = {
			has_law = law_type:law_serfdom
		}
		multiply = 0.5
	}
}

homeland_culture_disappear_threshold = 0.33
homeland_culture_form_threshold = 0.66

primary_culture_state_count_threshold = 0.5

primary_culture_state_count = {
	value = 0
	every_power_bloc_member = {
		every_scope_state = {
			limit = {
				any_scope_culture = {
					is_primary_culture_of = PREV.owner.power_bloc.power_bloc_leader
					PREV = {
						culture_percent_state = {
							target = PREV
							value >= primary_culture_state_count_threshold
						}
					}
				}
			}
			add = 1
		}
	}
}

accepted_culture_state_count_threshold = 0.1

accepted_culture_state_count = {
	value = 0
	every_power_bloc_member = {
		every_scope_state = {
			limit = {
				any_scope_culture = {
					NOT = { culture_is_discriminated_in = PREV.owner.power_bloc.power_bloc_leader }
					PREV = {
						culture_percent_state = {
							target = PREV
							value >= accepted_culture_state_count_threshold
						}
					}
				}
			}
			add = 1
		}
	}
}

multicultural_state_count = {
	value = 0
	every_power_bloc_member = {
		every_scope_state = {
			limit = {
				owner = {
					has_law = law_type:law_multicultural
				}
			}
			add = 1
		}
	}
}

total_state_count = {
	value = 0
	every_power_bloc_member = {
		every_scope_state = {
			add = 1
		}
	}
	min = 1
}

leverage_threshold_to_invite = {
	value = 200
	power_bloc_leader = {
		if = {
			limit = { has_technology_researched = intergovernmental_organizations }
			subtract = 100
		}
		if = {
			limit = { has_technology_researched = globalization }
			subtract = 50
		}
	}
}

power_bloc_population = {
	value = 0
	every_power_bloc_member = {
		add = total_population
	}
}

power_bloc_population_share = {
	value = 0
	every_power_bloc_member = {
		add = total_population
	}
	divide = global_population
	multiply = 100
}

power_bloc_gdp = {
	value = 0
	every_power_bloc_member = {
		add = gdp
	}
}

power_bloc_gdp_share = {
	value = 0
	every_power_bloc_member = {
		add = gdp
	}
	divide = global_gdp
	multiply = 100
}

power_bloc_avg_literacy = {
	value = 0
	every_power_bloc_member = {
		add = literacy_rate
	}
	divide = num_power_bloc_members
	multiply = 100
}

bloc_states_script_value = {
	value = num_power_bloc_states
}

power_bloc_mandate_progress_diplomatic_identity = {
	value = power_bloc_mandate_progress_by_rank
	add = {
		value = power_bloc_population_share
		desc = POWER_BLOC_MANDATE_PROGRESS_GLOBAL_POPULATION
	}
	add = {
		value = power_bloc_gdp_share
		desc = POWER_BLOC_MANDATE_PROGRESS_GLOBAL_GDP
	}
	add = {
		value = power_bloc_avg_literacy
		divide = 10
		desc = POWER_BLOC_MANDATE_PROGRESS_AVERAGE_LITERACY
	}
	add = {
		value = num_power_bloc_states
		divide = 100
		desc = POWER_BLOC_MANDATE_PROGRESS_NUM_STATES
	}
}

culture_acceptance_cost_script_value = {
	scope:curr_culture = {
		if = {
			limit = {
				shares_heritage_and_other_trait_with_any_primary_culture = ROOT
			}
			value = 0.25
		}
		else_if = {
			limit = {
				shares_heritage_trait_with_any_primary_culture = ROOT
			}
			value = 0.5
		}
		else_if = {
			limit = {
				shares_non_heritage_trait_with_any_primary_culture = ROOT
			}
			value = 0.75
		}
		else = {
			value = 100
		}
	}
}

total_cultural_acceptance_cost_script_value = {
	value = 0
	every_in_list = {
		variable = accepted_cultures
		add = culture_acceptance_cost_script_value
	}
}

culture_change_progress = {
	if = {
		limit = {
			NOT = { has_variable = culture_change_progress }
		}
		value = 0
	}
	else = {
		value = var:culture_change_progress
	}
}